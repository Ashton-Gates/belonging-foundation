
{% block content %}
{% load static %}
<head>
    <title>Applicant Dashboard</title>
</head>
<body>
    <h2>Applications Available</h2>
            <!-- Link to Pitch Deck Template -->
        <a href="/media/Pitch_Prep.pptx
        " download="Pitch_Prep.pptx">Pitch Deck Template</a>
    
    <ul>
        <!-- Add other dashboard links here -->
        <li><a href="{% url 'vendor_app' %}">Apply as Vendor</a></li>
        <li><a href="{% url 'scholarship_application' %}">Apply for Scholarship</a></li>
        We need to add a page to take them to an application info page to warn them of multiple submissions, criteria for passing, last check warnings, etc. 
    </ul>

        


        This needs is to be a page to display current scholarships available and to give access to scholarship application 
    <h1>Dashboard</h1>
<!-- Display scholarships -->
<div id="scholarshipCarousel" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
        {% for scholarship in scholarships %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
            <h3>{{ application.name }}</h3>
            <p>{{ application.summary }}</p>
            <!-- Add other fields if necessary, like an image -->
        </div>
        {% endfor %}
    </div>
    <a class="carousel-control-prev" href="#scholarshipCarousel" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#scholarshipCarousel" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>

        <!-- Display vendor applications -->
        <h2>Submitted Vendor Applications</h2>
        <ul>
            {% for application in vendor_applications %}
                <li>{{ application.name }} - {{ application.business_description }}</li>
            {% empty %}
                <li>No vendor applications available.</li>
            {% endfor %}
        </ul>
        <h2>Your Submitted Pitch Decks</h2>
        <ul>
            {% for deck in user_pitch_decks %}
                <li>{{ deck.title }} - <a href="{{ deck.file.url }}" download>Download</a></li>
            {% empty %}
                <li>No pitch decks submitted yet.</li>
            {% endfor %}
        </ul>

        <a href="/scholarship/" style="color: black; padding : 10px;"> Back to Scholarship</a>


        <script>
            function fetchApplications() {
              fetch('/internal/get-latest-applications/')
                .then(response => response.json())
                .then(data => {
                  // Assume you have a div with id="applications-list" to display applications
                  const applicationsList = document.getElementById('applications-list');
                  applicationsList.innerHTML = ''; // Clear current list
                  data.forEach(app => {
                    // Create a new element for each application and add it to the list
                    // This is a basic example; you might need to adjust based on your data structure
                    const appElement = document.createElement('div');
                    appElement.textContent = `Application ID: ${app.id}, Submitted: ${app.date_submitted}`;
                    applicationsList.appendChild(appElement);
                  });
                })
                .catch(error => console.error('Error fetching new applications:', error));
            }
            
            // Poll for new applications every 30 seconds
            setInterval(fetchApplications, 30000);
            
            // Also, fetch applications on page load
            document.addEventListener('DOMContentLoaded', fetchApplications);
            </script>
</body>
{% endblock %}
